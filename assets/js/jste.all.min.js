Element.prototype.matches||(Element.prototype.matches=Element.prototype.matchesSelector||Element.prototype.msMatchesSelector||Element.prototype.mozMatchesSelector||Element.prototype.webkitMatchesSelector||Element.prototype.oMatchesSelector),Element.prototype.next||(Element.prototype.next=function(e){var t=this.nextElementSibling;return!e||t&&Element.prototype.matches.call(t,e)?t:null}),Element.prototype.prev||(Element.prototype.prev=function(e){var t=this.previousElementSibling;return!e||t&&Element.prototype.matches.call(t,e)?t:null}),Element.prototype.closest||(Element.prototype.closest=function(e){var t=this;do{if(Element.prototype.matches.call(t,e))return t}while(null!==(t=t.parentElement||t.parentNode)&&1===t.nodeType);return null});{function runListeners(e){e=e||window.event;for(var t=0,s=0,o=oListeners[e.type];s<o.aEls.length;s++)if(o.aEls[s]===this){for(;t<o.aEvts[s].length;t++)o.aEvts[s][t].call(this,e);break}}Element.prototype.addEventListener||(oListeners={},Element.prototype.addEventListener=function(e,t){if(oListeners.hasOwnProperty(e)){for(var s=oListeners[e],o=-1,n=0;n<s.aEls.length;n++)if(s.aEls[n]===this){o=n;break}if(-1===o)s.aEls.push(this),s.aEvts.push([t]),this["on"+e]=runListeners;else{var l=s.aEvts[o];this["on"+e]!==runListeners&&(l.splice(0),this["on"+e]=runListeners);for(var r=0;r<l.length;r++)if(l[r]===t)return;l.push(t)}}else oListeners[e]={aEls:[this],aEvts:[[t]]},this["on"+e]=runListeners},Element.prototype.removeEventListener=function(e,t){if(oListeners.hasOwnProperty(e)){for(var s=oListeners[e],o=-1,n=0;n<s.aEls.length;n++)if(s.aEls[n]===this){o=n;break}if(-1!==o)for(var l=0,r=s.aEvts[o];l<r.length;l++)r[l]===t&&r.splice(l,1)}})}{function runListeners(e){e=e||window.event;for(var t=0,s=0,o=oListeners[e.type];s<o.aEls.length;s++)if(o.aEls[s]===this){for(;t<o.aEvts[s].length;t++)o.aEvts[s][t].call(this,e);break}}var oListeners;Element.prototype.addListener||(oListeners={},Element.prototype.addListener=function(e,t){if(oListeners.hasOwnProperty(e)){for(var s=oListeners[e],o=-1,n=0;n<s.aEls.length;n++)if(s.aEls[n]===this){o=n;break}if(-1===o)s.aEls.push(this),s.aEvts.push([t]),this["on"+e]=runListeners;else{var l=s.aEvts[o];this["on"+e]!==runListeners&&(l.splice(0),this["on"+e]=runListeners);for(var r=0;r<l.length;r++)if(l[r]===t)return;l.push(t)}}else oListeners[e]={aEls:[this],aEvts:[[t]]},this["on"+e]=runListeners},Element.prototype.removeListener=function(e,t){if(oListeners.hasOwnProperty(e)){for(var s=oListeners[e],o=-1,n=0;n<s.aEls.length;n++)if(s.aEls[n]===this){o=n;break}if(-1!==o)for(var l=0,r=s.aEvts[o];l<r.length;l++)r[l]===t&&r.splice(l,1)}},Element.prototype.removeAllListeners=function(e){if(oListeners.hasOwnProperty(e)){for(var t=oListeners[e],s=-1,o=0;o<t.aEls.length;o++)if(t.aEls[o]===this){s=o;break}if(-1!==s)for(var n=0,l=t.aEvts[s];n<l.length;n++)for(;l.length;)l.pop()}})}Element.prototype.fadeIn||(Element.prototype.fadeIn=function(e){var t=0,s=50/e,o=this;var n=window.setInterval(function(){t+=s,(o.style.opacity=t)<=0&&(o.style.display="none"),(t<=0||1<=t)&&clearInterval(n)},50)},Element.prototype.fadeOut=function(e){var t=1,s=50/e,o=this;o.el.style.display="inline",o.el.style.opacity=t;var n=window.setInterval(function(){t-=s,(o.style.opacity=t)<=0&&(o.style.display="none"),(t<=0||1<=t)&&clearInterval(n)},50)}),Element.prototype.parents||(Element.prototype.parents=function(){for(var e=[],t=this;(t=t.parentNode)&&9!==t.nodeType;)1===t.nodeType&&e.push(t);return e}),Element.prototype.slideUp||(Element.prototype.slideUp=function(e){var t=this;t.style.transitionProperty="height, margin, padding",t.style.transitionDuration=e+"ms",t.style.boxSizing="border-box",t.style.height=t.offsetHeight+"px",t.offsetHeight,t.style.overflow="hidden",t.style.height=0,t.style.paddingTop=0,t.style.paddingBottom=0,t.style.marginTop=0,t.style.marginBottom=0,setTimeout(()=>{t.style.display="none",t.style.removeProperty("height"),t.style.removeProperty("padding-top"),t.style.removeProperty("padding-bottom"),t.style.removeProperty("margin-top"),t.style.removeProperty("margin-bottom"),t.style.removeProperty("overflow"),t.style.removeProperty("transition-duration"),t.style.removeProperty("transition-property")},e)},Element.prototype.slideDown=function(e){const t=this;t.style.removeProperty("display");let s=window.getComputedStyle(t).display;"none"===s&&(s="block"),t.style.display=s;var o=t.offsetHeight;t.style.overflow="hidden",t.style.height=0,t.style.paddingTop=0,t.style.paddingBottom=0,t.style.marginTop=0,t.style.marginBottom=0,t.offsetHeight,t.style.boxSizing="border-box",t.style.transitionProperty="height, margin, padding",t.style.transitionDuration=e+"ms",t.style.height=o+"px",t.style.removeProperty("padding-top"),t.style.removeProperty("padding-bottom"),t.style.removeProperty("margin-top"),t.style.removeProperty("margin-bottom"),setTimeout(()=>{t.style.removeProperty("height"),t.style.removeProperty("overflow"),t.style.removeProperty("transition-duration"),t.style.removeProperty("transition-property")},e)},Element.prototype.slideToggle=function(e){return("none"===getComputedStyle(this).display?Element.prototype.slideUp:Element.prototype.slideDown).call(this,e)});const jste=function(e,t={},s=document){let D=s.querySelector(e);let B=["0,0,0","68,68,68","102,102,102","153,153,153","204,204,204","238,238,238","243,243,243","255,255,255",null,"255,0,0","255,153,0","255,255,0","0,255,0","0,255,255","0,0,255","153,0,255","255,0,255",null,"244,204,204","252,229,205","255,242,204","217,234,211","208,224,227","207,226,243","217,210,233","234,209,220","234,153,153","249,203,156","255,229,153","182,215,168","162,196,201","159,197,232","180,167,214","213,166,189","224,102,102","246,178,107","255,217,102","147,196,125","118,165,175","111,168,220","142,124,195","194,123,160","204,0,0","230,145,56","241,194,50","106,168,79","69,129,142","61,133,198","103,78,167","166,77,121","153,0,0","180,95,6","191,144,0","56,118,29","19,79,92","11,83,148","53,28,117","116,27,71","102,0,0","120,63,4","127,96,0","39,78,19","12,52,61","7,55,99","32,18,77","76,17,48"];let W=Object.assign({status:!0,css:"jste",title:!0,titletext:[{title:"Text Format"},{title:"Font Size"},{title:"Color"},{title:"Bold",hotkey:"B"},{title:"Italic",hotkey:"I"},{title:"Underline",hotkey:"U"},{title:"Ordered List",hotkey:"."},{title:"Unordered List",hotkey:","},{title:"Subscript",hotkey:"down arrow"},{title:"Superscript",hotkey:"up arrow"},{title:"Outdent",hotkey:"left arrow"},{title:"Indent",hotkey:"right arrow"},{title:"Justify Left"},{title:"Justify Center"},{title:"Justify Right"},{title:"Strike Through",hotkey:"K"},{title:"Add Link",hotkey:"L"},{title:"Remove Link"},{title:"Cleaner Style",hotkey:"Delete"},{title:"Horizontal Rule",hotkey:"H"},{title:"Source"}],button:"OK",format:!0,formats:[["p","Normal"],["h1","Header 1"],["h2","Header 2"],["h3","Header 3"],["h4","Header 4"],["h5","Header 5"],["h6","Header 6"],["pre","Preformatted"]],fsize:!0,fsizes:["10","12","16","18","20","24","28"],funit:"px",color:!0,linktypes:["Web Address","E-mail Address","Picture URL"],b:!0,i:!0,u:!0,ol:!0,ul:!0,sub:!0,sup:!0,outdent:!0,indent:!0,left:!0,center:!0,right:!0,strike:!0,link:!0,unlink:!0,remove:!0,rule:!0,source:!0,placeholder:!1,br:!0,p:!0,change:"",focus:"",blur:""},t),K=navigator.userAgent.toLowerCase(),J=(/msie [1-7]./.test(K)&&(W.title=!1),[]);function o(e,t,s,o,n){var l=J.length+1;J.push({name:e,cls:l,command:t,key:s,tag:o,emphasis:n})}return o("format","formats","","",!1),o("fsize","fSize","","",!1),o("color","colors","","",!1),o("b","Bold","B",["b","strong"],!0),o("i","Italic","I",["i","em"],!0),o("u","Underline","U",["u"],!0),o("ol","insertorderedlist","¾",["ol"],!0),o("ul","insertunorderedlist","¼",["ul"],!0),o("sub","subscript","(",["sub"],!0),o("sup","superscript","&",["sup"],!0),o("outdent","outdent","%",["blockquote"],!1),o("indent","indent","'",["blockquote"],!0),o("left","justifyLeft","","",!1),o("center","justifyCenter","","",!1),o("right","justifyRight","","",!1),o("strike","strikeThrough","K",["strike"],!0),o("link","linkcreator","L",["a"],!0),o("unlink","unlink","",["a"],!1),o("remove","removeformat",".","",!1),o("rule","inserthorizontalrule","H",["hr"],!1),o("source","displaysource","","",!1),{init(){if(D.dataset.jste&&null!=D.dataset.jste&&"undefined"!=D.dataset.jste?D.dataset.jste=!1:D.dataset.jste=!0,W.status&&"false"!=D.dataset.jste.toLowerCase()){let t=D;var _=D.tagName.toLowerCase();D.setAttribute("data-origin",_);let s=D.matches("[value]")||"textarea"==_?D.value:D.innerHTML,n=(s=s.replace(/&#34;/g,'"').replace(/&#39;/g,"'").replace(/&lt;/g,"<").replace(/&gt;/g,">").replace(/&amp;/g,"&"),D.insertAdjacentHTML("afterend",'<div class="'+W.css+'"></div>'),D.next("."+W.css)),l=(n.innerHTML='<div class="'+W.css+'_toolbar" role="toolbar" unselectable></div><div class="'+W.css+'_linkform" style="display:none" role="dialog"></div><div class="'+W.css+'_editor"></div>',n.querySelector("."+W.css+"_toolbar")),o=n.querySelector("."+W.css+"_linkform"),i=n.querySelector("."+W.css+"_editor"),r=W.css+"_tool_depressed",a=(o.insertAdjacentHTML("beforeend",'<div class="'+W.css+'_linktypeselect" unselectable></div><input class="'+W.css+'_linkinput" type="text/css" value=""><div class="'+W.css+'_linkbutton" unselectable>'+W.button+'</div> <div style="height:1px;float:none;clear:both"></div>'),o.querySelector("."+W.css+"_linktypeselect")),d=o.querySelector("."+W.css+"_linkinput"),u=o.querySelector("."+W.css+"_linkbutton"),p=(a.insertAdjacentHTML("beforeend",'<div class="'+W.css+'_linktypeview" unselectable></div><div class="'+W.css+'_linktypes" role="menu" unselectable></div>'),a.querySelector("."+W.css+"_linktypes")),f=a.querySelector("."+W.css+"_linktypeview"),y=W.css+"-setlink",m=(i.insertAdjacentHTML("afterend",'<div class="'+W.css+"_source "+W.css+'_hiddenField"></div>'),n.querySelector("."+W.css+"_source"));if(m.appendChild(t),"textarea"!=_){let e="";Array.prototype.forEach.call(t.attributes,function(){"type"!=this.nodeName&&"value"!=this.nodeName&&(e=e+" "+this.nodeName+'="'+this.nodeValue+'"')}),t.outerHTML="<textarea "+e+">"+s+"</textarea>",t=m.querySelector("textarea")}i.setAttribute("contenteditable","true"),i.innerHTML=s;for(let t=0;t<J.length;t++)if(W[J[t].name]){var k=0<J[t].key.length&&null!=W.titletext[t].hotkey&&"undefined"!=W.titletext[t].hotkey&&""!=W.titletext[t].hotkey?" (Ctrl+"+W.titletext[t].hotkey+")":"",k=null!=W.titletext[t].title&&"undefined"!=W.titletext[t].title&&""!=W.titletext[t].title?W.titletext[t].title+k:"";l.insertAdjacentHTML("beforeend",'<div class="'+W.css+"_tool "+W.css+"_tool_"+J[t].cls+'" role="button" data-tool="'+t+'" unselectable><a class="'+W.css+'_tool_icon" unselectable></a></div>');let e=l.querySelector("."+W.css+'_tool[data-tool="'+t+'"]');if(e.dataset.tag=J[t].tag,e.dataset.command=J[t].command,e.dataset.emphasis=J[t].emphasis,e.dataset.title=k,"format"==J[t].name&&Array.isArray(W.formats)){k=0<W.formats[0][1].length&&"undefined"!=W.formats[0][1]?W.formats[0][1]:"";l.querySelector("."+W.css+"_tool_"+J[t].cls).querySelector("."+W.css+"_tool_icon").outerHTML='<a class="'+W.css+'_tool_label" unselectable><span class="'+W.css+'_tool_text" unselectable>'+k+'</span><span class="'+W.css+'_tool_icon" unselectable></span></a>',l.querySelector("."+W.css+"_tool_"+J[t].cls).insertAdjacentHTML("beforeend",'<div class="'+W.css+'_formats" unselectable></div>');for(let e=0;e<W.formats.length;e++)l.querySelector("."+W.css+"_formats").insertAdjacentHTML("beforeend","<a "+W.css+'-formatval="'+W.formats[e][0]+'" class="'+W.css+"_format "+W.css+"_format_"+e+'" role="menuitem" unselectable>'+W.formats[e][1]+"</a>");l.querySelectorAll("."+W.css+"_formats").forEach(function(e){e.dataset.status=!1})}else if("fsize"==J[t].name&&Array.isArray(W.fsizes)){l.querySelector("."+W.css+"_tool_"+J[t].cls).insertAdjacentHTML("beforeend",'<div class="'+W.css+'_fontsizes" unselectable></div>');for(let e=0;e<W.fsizes.length;e++)l.querySelector("."+W.css+"_fontsizes").insertAdjacentHTML("beforeend","<a "+W.css+'-styleval="'+W.fsizes[e]+'" class="'+W.css+'_fontsize" style="font-size:'+W.fsizes[e]+W.funit+'" role="menuitem" unselectable>Abcdefgh...</a>')}else if("color"==J[t].name&&Array.isArray(B)){l.querySelector("."+W.css+"_tool_"+J[t].cls).insertAdjacentHTML("beforeend",'<div class="'+W.css+'_cpalette" unselectable></div>');for(let e=0;e<B.length;e++)null!=B[e]?l.querySelector("."+W.css+"_cpalette").insertAdjacentHTML("beforeend","<a "+W.css+'-styleval="'+B[e]+'" class="'+W.css+'_color" style="background-color: rgb('+B[e]+')" role="gridcell" unselectable></a>'):l.querySelector("."+W.css+"_cpalette").insertAdjacentHTML("beforeend",'<div class="'+W.css+'_colorSeperator"></div>')}}p.dataset.linktype="0";for(let e=0;e<3;e++)p.insertAdjacentHTML("beforeend","<a "+W.css+'-linktype="'+e+'" unselectable>'+W.linktypes[e]+"</a>"),f.innerHTML='<div class="'+W.css+'_linktypearrow" unselectable></div><div class="'+W.css+'_linktypetext">'+p.querySelectorAll("a")[p.dataset.linktype].textContent+"</div>";let e="";if(e=/msie/.test(K)?"-ms-":/chrome/.test(K)||/safari/.test(K)||/yandex/.test(K)?"-webkit-":/mozilla/.test(K)?"-moz-":/opera/.test(K)?"-o-":/konqueror/.test(K)?"-khtml-":"",W.placeholder&&""!=W.placeholder){n.prepend('<div class="'+W.css+'_placeholder" unselectable><div class="'+W.css+'_placeholder_text">'+W.placeholder+"</div></div>");let e=n.querySelector("."+W.css+"_placeholder");e.addListener("click",function(){i.focus()})}n.querySelectorAll("[unselectable]").forEach(function(t){t.style[e+"user-select"]="none",t.classList.add("unselectable"),t.setAttribute("unselectable","on"),["selectstart","mousedown"].forEach(function(e){t.removeListener(e)})});let h=l.querySelectorAll("."+W.css+"_tool"),v=l.querySelector("."+W.css+"_formats"),g=l.querySelector("."+W.css+"_fontsizes"),L=l.querySelector("."+W.css+"_cpalette"),b=function(){let t,s;if(window.getSelection&&(s=getSelection(),t=s.anchorNode),!t&&document.selection&&document.selection.createRange&&"None"!=document.selection.type){let e=(s=document.selection).getRangeAt?s.getRangeAt(0):s.createRange();t=e.commonAncestorContainer||(e.parentElement?e.parentElement():e.item(0))}return!!t&&("#text"==t.nodeName?t.parentNode:t)},E=(h.forEach(function(e){e.removeAllListeners("click"),e.addListener("click",function(e){"displaysource"!=this.dataset.command||void 0!==l.dataset.sourceOpened&&"false"!=l.dataset.sourceOpened?(void 0===l.dataset.sourceOpened||"false"==l.dataset.sourceOpened?"linkcreator"==this.dataset.command?void 0===l.dataset.linkOpened||"false"==l.dataset.linkOpened?H():(M(!1),z(!1)):"formats"==this.dataset.command?("formats"!=this.dataset.command||e.target.classList.contains(W.css+"_format")||(z(!0),v.querySelectorAll("a").forEach(function(e){e.addListener("click",function(){this.querySelectorAll("*").forEach(function(e){e.addListener("click",function(e){return e.preventDefault(),!1})}),N(this.textContent),A("formatBlock","<"+this.getAttribute(W.css+"-formatval")+">"),z(!1)})})),j("",!1),i.matches(":not(:focus)")&&i.focus()):"fSize"==this.dataset.command||"colors"==this.dataset.command?(("fSize"==this.dataset.command&&!e.target.classList.contains(W.css+"_fontsize")||"colors"==this.dataset.command&&!e.target.classList.contains(W.css+"_color"))&&R(this.dataset.command),z(!1),i.matches(":not(:focus)")&&i.focus()):(i.matches(":not(:focus)")&&i.focus(),A(this.dataset.command,null),j("",!1),z(!1),C(),void 0===this.dataset.emphasis||"true"!=this.dataset.emphasis.toLowerCase()||this.classList.contains(r)?this.classList.remove(r):this.classList.add(r),m.classList.add(W.css+"_hiddenField"),i.classList.remove(W.css+"_hiddenField")):(l.dataset.sourceOpened=!1,l.querySelectorAll("."+W.css+"_tool").forEach(function(e){e.classList.remove(W.css+"_hiddenField")}),m.classList.add(W.css+"_hiddenField"),i.classList.remove(W.css+"_hiddenField")),W.placeholder&&""!=W.placeholder&&(""!=i.innerHTML?placeHolder.style.display="none":placeHolder.style.display="")):(l.querySelector("."+W.css+"_tool").classList.add(W.css+"_hiddenField"),this.classList.remove(W.css+"_hiddenField"),l.dataset.sourceOpened=!0,t.style.height=i.outerHeight,m.classList.remove(W.css+"_hiddenField"),i.classList.add(W.css+"_hiddenField"),t.focus(),M(!1),j("",!1),z(),W.placeholder&&""!=W.placeholder&&(placeHolder.style.display="none")),i.dispatchEvent(new Event("change"))}),e.addListener("mouseover",function(o){if(W.title&&""!=this.dataset.title&&(o.target.classList.contains(W.css+"_tool")||o.target.classList.contains(W.css+"_tool_icon"))){document.querySelectorAll("."+W.css+"_title").forEach(function(e){e.remove()}),n.insertAdjacentHTML("beforeend",'<div class="'+W.css+'_title"><div class="'+W.css+'_titleArrow"><div class="'+W.css+'_titleArrowIcon"></div></div><div class="'+W.css+'_titleText">'+this.dataset.title+"</div></div>");let e=document.querySelector("."+W.css+"_title");o={top:this.offsetTop,left:this.offsetLeft};let t=o.left+this.outerWidth-e.outerWidth/2-this.outerWidth/2,s=o.top+this.outerHeight+5;setTimeout(function(){e.style.top=s,e.style.left=t,e.fadeIn(200)},400)}}),e.addListener("mouseleave",function(e){document.querySelectorAll("."+W.css+"_title").forEach(function(e){e.remove()})})}),null);return["keypress","keyup","keydown","drop","cut","copy","paste","DOMCharacterDataModified","DOMSubtreeModified"].forEach(function(e){i.addListener(e,function(){void 0!==l.dataset.sourceOpened&&"false"!=l.dataset.sourceOpened.toLowerCase()||this.dispatchEvent(new Event("change")),C(),"function"==typeof W.change&&"number"!=typeof W.change.nodeType&&W.change(),W.placeholder&&""!=W.placeholder&&(""!=this.textContent?placeHolder.style.display="none":placeHolder.style.display="")})}),i.addListener("change",function(){void 0!==l.dataset.sourceOpened&&"false"!=l.dataset.sourceOpened.toLowerCase()||(clearTimeout(E),E=setTimeout(F,10))}),i.addListener("keydown",function(t){if(t.ctrlKey)for(let e=0;e<J.length;e++)if(W[J[e].name]&&t.keyCode==J[e].key.charCodeAt(0))return""!=J[e].command&&"linkcreator"!=J[e].command?A(J[e].command,null):"linkcreator"==J[e].command&&H(),!1}),["mouseup","keyup"].forEach(function(e){i.addListener(e,U)}),i.addListener("focus",function(){if("function"==typeof W.focus&&"number"!=typeof W.focus.nodeType&&W.focus(),n.classList.add(W.css+"_focused"),/opera/.test(K)){let e=document.createRange(),t=(e.selectNodeContents(i),e.collapse(!1),window.getSelection());t.removeAllRanges(),t.addRange(e)}}),i.addListener("focusout",function(){h.forEach(function(e){e.classList.remove(r)}),j("",!1),z(!1),C(),"function"==typeof W.blur&&"number"!=typeof W.blur.nodeType&&W.blur(),n.classList.remove(W.css+"_focused"),Array.isArray(W.formats)&&N(W.formats[0][1])}),["keydown","keyup"].forEach(function(e){t.addListener(e,function(){setTimeout(I,0),this.style.height=this.scrollHeight,""==this.value&&(this.style.height=0)})}),t.addListener("focus",function(){n.classList.add(W.css+"_focused")}),t.addListener("focusout",function(){n.classList.remove(W.css+"_focused")}),this.container=n,this;function S(){return window.getSelection?window.getSelection():document.selection&&document.selection.createRange&&"None"!=document.selection.type?document.selection.createRange():void 0}function A(e,t){let s,o=S();window.getSelection?((s=o.anchorNode&&o.getRangeAt?o.getRangeAt(0):s)&&(o.removeAllRanges(),o.addRange(s)),K.match(/msie/)||document.execCommand("StyleWithCSS",!1,!1),document.execCommand(e,!1,t)):document.selection&&document.selection.createRange&&"None"!=document.selection.type&&(s=document.selection.createRange()).execCommand(e,!1,t),T(!1,!1)}function w(n,l,r){if(i.matches(":not(:focus)")&&i.focus(),window.getSelection){let e=S(),t,s,o;e.anchorNode&&e.getRangeAt&&(t=e.getRangeAt(0),(s=document.createElement(n)).setAttribute(l,r),o=t.extractContents(),s.appendChild(o),t.insertNode(s),e.removeAllRanges(),T(s,"style"==l&&r))}else document.selection&&document.selection.createRange&&"None"!=document.selection.type&&(l="<"+n+" "+l+'="'+r+'">'+document.selection.createRange().htmlText+"</"+n+">",document.selection.createRange().pasteHTML(l))}function T(e,s){let t=b();if((t=t||e)&&0==s)t.parentNode.matches("[style]")&&t.setAttribute("style",t.parentNode.getAttribute("style")),t.matches("[style]")&&t.querySelectorAll("*").forEach(function(e){e.setAttribute("style",t.getAttribute("style"))});else if(e&&s&&e.matches("[style]")){let t=s.split(";");t=t[0].split(":"),e.matches('[style*="'+t[0]+'"]')&&e.querySelectorAll("*").forEach(function(e){e.style[t[0]]=t[1]}),q(e)}}function q(s){if(s)if(document.body.createTextRange){let e=document.body.createTextRange();e.moveToElementText(s),e.select()}else if(window.getSelection){let e=window.getSelection(),t=document.createRange();"undefined"!=s&&null!=s&&(t.selectNodeContents(s),e.removeAllRanges(),e.addRange(t),s.matches(":empty")&&(s.insertAdjacentHTML("beforeend","&nbsp;"),q(s)))}}function H(){if(void 0===l.dataset.sourceOpened||"false"==l.dataset.sourceOpened){let e=b(),t="http://";M(!0),e?"a"==e.tagName.toLowerCase()&&e.matches("[href]")?(t=e.getAttribute("href"),e.setAttribute(y,"")):w("a",y,""):d.value=t,d.focus(),a.addListener("click",function(e){(e.target.classList.contains(W.css+"_linktypetext")||e.target.classList.contains(W.css+"_linktypearrow"))&&C(!0)}),p.querySelectorAll("a").forEach(function(e){e.addListener("click",function(){var e=this.getAttribute(W.css+"-linktype");p.dataset.linktype=e,f.querySelector("."+W.css+"_linktypetext").innerHTML=p.querySelectorAll("a")[p.dataset.linktype].textContent,O(t),C()})}),O(t),d.focus(),d.value=t,["keypress","keyup"].forEach(function(e){d.addListener(e,function(e){if(13==e.keyCode)return x(n.querySelector("["+y+"]")),!1})}),u.addListener("click",function(){return x(n.querySelector("["+y+"]")),!1})}else M(!1)}function x(e){d.focus(),q(e),void 0!==e&&e&&e.removeAttribute(y),"2"!=p.dataset.linktype?A("createlink",d.value):(A("insertImage",d.value),i.querySelectorAll("img").forEach(function(e){let t=e.prev("a"),s=e.next("a");t&&""==t.innerHTML?t.remove():s&&""==s.innerHTML&&s.remove()})),M(),i.dispatchEvent(new Event("change"))}function M(e){var t;t="["+y+"]:not([href])",n.querySelectorAll(t).forEach(function(e){e.insertAdjacentHTML("beforebegin",e.innerHTML),e.remove()}),n.querySelectorAll("["+y+"][href]").forEach(function(e){e.removeAttribute(y)}),e?(l.dataset.linkOpened=!0,o.style.display=""):(l.dataset.linkOpened=!1,o.style.display="none"),C()}function C(e){p.style.display=e?"":"none"}function O(e){var t=p.dataset.linktype;"1"!=t||"http://"!=d.value&&!d.matches('[value^="http://"]')&&d.matches('[value^="mailto"]')?"1"==t||d.matches('[value^="http://"]')?d.value=e:d.value="http://":d.value="mailto:"}function R(s){void 0===l.dataset.sourceOpened||"false"==l.dataset.sourceOpened?("fSize"==s?styleField=g:"colors"==s&&(styleField=L),j(styleField,!0),styleField.querySelectorAll("a").forEach(function(e){e.removeAllListeners("click"),e.addListener("click",function(){let e=this.getAttribute(W.css+"-styleval");"fSize"==s?(styleType="font-size",e+=W.funit):"colors"==s&&(styleType="color",e="rgb("+e+")");var t=function(e){let t=b();{var s,o;return t&&t.matches("[style]")&&""!=t.style[e]?(s=t.style[e],t.style[e]="",o=t.getAttribute("style"),t.style[e]=s,o):""}}(styleType);w("span","style",styleType+":"+e+";"+t),j("",!1),document.querySelectorAll("."+W.css+"_title").forEach(function(e){e.remove()}),i.dispatchEvent(new Event("change"))})})):j(styleField,!1),M(!1)}function j(t,e){let s="",o=[{d:"fsizeOpened",f:g},{d:"cpallOpened",f:L}];if(""!=t)for(let e=0;e<o.length;e++)t==o[e].f&&(s=o[e]);if(e){l.dataset[s.d]=!0,s.f.slideDown(100);for(let e=0;e<o.length;e++)s.d!=o[e].d&&(l.dataset[o[e].d]=!1,o[e].f.slideUp(100))}else for(let e=0;e<o.length;e++)l.dataset[o[e].d]=!1,o[e].f.slideUp(100)}function z(e){!(!e||void 0===v.dataset.status||"true"!=v.dataset.status.toLowerCase())||!e?(v.dataset.status=!1,v.slideUp(200)):(v.dataset.status=!0,v.slideDown(200))}function N(e){let t=v.closest("."+W.css+"_tool").querySelector("."+W.css+"_tool_label").querySelector("."+W.css+"_tool_text");10<e.length&&(e=e.substr(0,7)+"..."),t.innerHTML=e}function P(e){let t,s,o;for(t=e.replace(/\n/gim,"").replace(/\r/gim,"").replace(/\t/gim,"").replace(/&nbsp;/gim," "),s=[/\<span(|\s+.*?)><span(|\s+.*?)>(.*?)<\/span><\/span>/gim,/<(\w*[^p])\s*[^\/>]*>\s*<\/\1>/gim,/\<div(|\s+.*?)>(.*?)\<\/div>/gim,/\<strong(|\s+.*?)>(.*?)\<\/strong>/gim,/\<em(|\s+.*?)>(.*?)\<\/em>/gim],o=["<span$2>$3</span>","","<p$1>$2</p>","<b$1>$2</b>","<i$1>$2</i>"],c=0;c<5;c++)for(let e=0;e<s.length;e++)t=t.replace(s[e],o[e]);if(W.p||(t=t.replace(/\<p(|\s+.*?)>(.*?)\<\/p>/gi,"<br/>$2")),!W.br){s=[/\<br>(.*?)/gi,/\<br\/>(.*?)/gi],o=["<p>$1</p>","<p>$1</p>"];for(let e=0;e<s.length;e++)t=t.replace($htmlPattern[e],o[e])}return t=W.p||W.br?t:t.replace(/\<p>(.*?)\<\/p>/gi,"<div>$1</div>")}function F(){var e=""==i.textContent&&i.innerHTML.length<12?"":i.innerHTML;t.value=P(e)}function I(){i.innerHTML=P(t.value)}function $(e){let s=!1,o=b(),n;return o&&(e.forEach(function(e,t){(n=o.tagName.toLowerCase())==t?s=!0:o.parents().forEach(function(e){(n=e.tagName.toLowerCase())==t&&(s=!0)})}),s)}function U(e){for(let e=0;e<J.length;e++)W[J[e].name]&&J[e].emphasis&&""!=J[e].tag&&($(J[e].tag)?l.querySelectorAll("."+W.css+"_tool_"+J[e].cls).forEach(function(e){e.classList.add(r)}):document.querySelector("."+W.css+"_tool_"+J[e].cls).classList.remove(r));if(W.format&&Array.isArray(W.formats)){let s=!1;for(let t=0;t<W.formats.length;t++){let e=[];if(e[0]=W.formats[t][0],0<W.formats[t][0].length&&$(e)){N(W.formats[t][1]),s=!0;break}}s||N(W.formats[0][1])}j("",!1),z(!1)}}else if(0<D.closest("."+W.css).length){let e=D.closest("."+W.css).querySelector("."+W.css+"_editor").innerHTML,t="";Array.prototype.forEach.call(D.attributes,function(){"style"!=this.nodeName&&(t=t+" "+this.nodeName+'="'+this.nodeValue+'"')});_=D.matches("[data-origin]")&&""!=D.getAttribute("data-origin")?D.getAttribute("data-origin"):"textarea";let s=">"+e,o=("input"!=_&&"option"!=_||(e=e.replace(/"/g,"&#34;").replace(/'/g,"&#39;").replace(/</g,"&lt;").replace(/>/g,"&gt;"),s='value="'+e+'">'),D.cloneNode());D.dataset.jste=!1,D.closest("."+W.css).insertAdjacentHTML("beforeend",o).remove(),o.outerHTML="<"+_+t+s+"</"+_+">"}}}};
//# sourceMappingURL=jste.all.min.js.map