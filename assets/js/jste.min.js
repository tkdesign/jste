const jste=function(e,t={},s=document){let B=s.querySelector(e);let W=["0,0,0","68,68,68","102,102,102","153,153,153","204,204,204","238,238,238","243,243,243","255,255,255",null,"255,0,0","255,153,0","255,255,0","0,255,0","0,255,255","0,0,255","153,0,255","255,0,255",null,"244,204,204","252,229,205","255,242,204","217,234,211","208,224,227","207,226,243","217,210,233","234,209,220","234,153,153","249,203,156","255,229,153","182,215,168","162,196,201","159,197,232","180,167,214","213,166,189","224,102,102","246,178,107","255,217,102","147,196,125","118,165,175","111,168,220","142,124,195","194,123,160","204,0,0","230,145,56","241,194,50","106,168,79","69,129,142","61,133,198","103,78,167","166,77,121","153,0,0","180,95,6","191,144,0","56,118,29","19,79,92","11,83,148","53,28,117","116,27,71","102,0,0","120,63,4","127,96,0","39,78,19","12,52,61","7,55,99","32,18,77","76,17,48"];let K=Object.assign({status:!0,css:"jste",title:!0,titletext:[{title:"Text Format"},{title:"Font Size"},{title:"Color"},{title:"Bold",hotkey:"B"},{title:"Italic",hotkey:"I"},{title:"Underline",hotkey:"U"},{title:"Ordered List",hotkey:"."},{title:"Unordered List",hotkey:","},{title:"Subscript",hotkey:"down arrow"},{title:"Superscript",hotkey:"up arrow"},{title:"Outdent",hotkey:"left arrow"},{title:"Indent",hotkey:"right arrow"},{title:"Justify Left"},{title:"Justify Center"},{title:"Justify Right"},{title:"Strike Through",hotkey:"K"},{title:"Add Link",hotkey:"L"},{title:"Remove Link"},{title:"Cleaner Style",hotkey:"Delete"},{title:"Horizontal Rule",hotkey:"H"},{title:"Source"}],button:"OK",format:!0,formats:[["p","Normal"],["h1","Header 1"],["h2","Header 2"],["h3","Header 3"],["h4","Header 4"],["h5","Header 5"],["h6","Header 6"],["pre","Preformatted"]],fsize:!0,fsizes:["10","12","16","18","20","24","28"],funit:"px",color:!0,linktypes:["Web Address","E-mail Address","Picture URL"],b:!0,i:!0,u:!0,ol:!0,ul:!0,sub:!0,sup:!0,outdent:!0,indent:!0,left:!0,center:!0,right:!0,strike:!0,link:!0,unlink:!0,remove:!0,rule:!0,source:!0,placeholder:!1,br:!0,p:!0,change:"",focus:"",blur:""},t),J=navigator.userAgent.toLowerCase();/msie [1-7]./.test(J)&&(K.title=!1);let P=[];function l(e,t,s,l,o){var n=P.length+1;return P.push({name:e,cls:n,command:t,key:s,tag:l,emphasis:o})}return l("format","formats","","",!1),l("fsize","fSize","","",!1),l("color","colors","","",!1),l("b","Bold","B",["b","strong"],!0),l("i","Italic","I",["i","em"],!0),l("u","Underline","U",["u"],!0),l("ol","insertorderedlist","¾",["ol"],!0),l("ul","insertunorderedlist","¼",["ul"],!0),l("sub","subscript","(",["sub"],!0),l("sup","superscript","&",["sup"],!0),l("outdent","outdent","%",["blockquote"],!1),l("indent","indent","'",["blockquote"],!0),l("left","justifyLeft","","",!1),l("center","justifyCenter","","",!1),l("right","justifyRight","","",!1),l("strike","strikeThrough","K",["strike"],!0),l("link","linkcreator","L",["a"],!0),l("unlink","unlink","",["a"],!1),l("remove","removeformat",".","",!1),l("rule","inserthorizontalrule","H",["hr"],!1),l("source","displaysource","","",!1),{init(){if(B.dataset.jste&&null!=B.dataset.jste&&"undefined"!=B.dataset.jste?B.dataset.jste=!1:B.dataset.jste=!0,K.status&&"false"!=B.dataset.jste.toLowerCase()){let t=B;var k=B.tagName.toLowerCase();B.setAttribute("data-origin",k);let s=B.matches("[value]")||"textarea"==k?B.value:B.innerHTML;s=s.replace(/&#34;/g,'"').replace(/&#39;/g,"'").replace(/&lt;/g,"<").replace(/&gt;/g,">").replace(/&amp;/g,"&"),B.insertAdjacentHTML("afterend",'<div class="'+K.css+'"></div>');let n=B.next("."+K.css);n.innerHTML='<div class="'+K.css+'_toolbar" role="toolbar" unselectable></div><div class="'+K.css+'_linkform" style="display:none" role="dialog"></div><div class="'+K.css+'_editor"></div>';let o=n.querySelector("."+K.css+"_toolbar"),l=n.querySelector("."+K.css+"_linkform"),i=n.querySelector("."+K.css+"_editor"),a=K.css+"_tool_depressed";l.insertAdjacentHTML("beforeend",'<div class="'+K.css+'_linktypeselect" unselectable></div><input class="'+K.css+'_linkinput" type="text/css" value=""><div class="'+K.css+'_linkbutton" unselectable>'+K.button+'</div> <div style="height:1px;float:none;clear:both"></div>');let r=l.querySelector("."+K.css+"_linktypeselect"),d=l.querySelector("."+K.css+"_linkinput"),u=l.querySelector("."+K.css+"_linkbutton");r.insertAdjacentHTML("beforeend",'<div class="'+K.css+'_linktypeview" unselectable></div><div class="'+K.css+'_linktypes" role="menu" unselectable></div>');let f=r.querySelector("."+K.css+"_linktypes"),m=r.querySelector("."+K.css+"_linktypeview"),h=K.css+"-setlink";i.insertAdjacentHTML("afterend",'<div class="'+K.css+"_source "+K.css+'_hiddenField"></div>');let p=n.querySelector("."+K.css+"_source");if(p.appendChild(t),"textarea"!=k){let e="";Array.prototype.forEach.call(t.attributes,function(){"type"!=this.nodeName&&"value"!=this.nodeName&&(e=e+" "+this.nodeName+'="'+this.nodeValue+'"')}),t.outerHTML="<textarea "+e+">"+s+"</textarea>",t=p.querySelector("textarea")}i.setAttribute("contenteditable","true"),i.innerHTML=s;for(let t=0;t<P.length;t++)if(K[P[t].name]){var A=0<P[t].key.length&&null!=K.titletext[t].hotkey&&"undefined"!=K.titletext[t].hotkey&&""!=K.titletext[t].hotkey?" (Ctrl+"+K.titletext[t].hotkey+")":"",A=null!=K.titletext[t].title&&"undefined"!=K.titletext[t].title&&""!=K.titletext[t].title?K.titletext[t].title+A:"";o.insertAdjacentHTML("beforeend",'<div class="'+K.css+"_tool "+K.css+"_tool_"+P[t].cls+'" role="button" data-tool="'+t+'" unselectable><a class="'+K.css+'_tool_icon" unselectable></a></div>');let e=o.querySelector("."+K.css+'_tool[data-tool="'+t+'"]');if(e.dataset.tag=P[t].tag,e.dataset.command=P[t].command,e.dataset.emphasis=P[t].emphasis,e.dataset.title=A,"format"==P[t].name&&Array.isArray(K.formats)){A=0<K.formats[0][1].length&&"undefined"!=K.formats[0][1]?K.formats[0][1]:"";o.querySelector("."+K.css+"_tool_"+P[t].cls).querySelector("."+K.css+"_tool_icon").outerHTML='<a class="'+K.css+'_tool_label" unselectable><span class="'+K.css+'_tool_text" unselectable>'+A+'</span><span class="'+K.css+'_tool_icon" unselectable></span></a>',o.querySelector("."+K.css+"_tool_"+P[t].cls).insertAdjacentHTML("beforeend",'<div class="'+K.css+'_formats" unselectable></div>');for(let e=0;e<K.formats.length;e++)o.querySelector("."+K.css+"_formats").insertAdjacentHTML("beforeend","<a "+K.css+'-formatval="'+K.formats[e][0]+'" class="'+K.css+"_format "+K.css+"_format_"+e+'" role="menuitem" unselectable>'+K.formats[e][1]+"</a>");o.querySelectorAll("."+K.css+"_formats").forEach(function(e){e.dataset.status=!1})}else if("fsize"==P[t].name&&Array.isArray(K.fsizes)){o.querySelector("."+K.css+"_tool_"+P[t].cls).insertAdjacentHTML("beforeend",'<div class="'+K.css+'_fontsizes" unselectable></div>');for(let e=0;e<K.fsizes.length;e++)o.querySelector("."+K.css+"_fontsizes").insertAdjacentHTML("beforeend","<a "+K.css+'-styleval="'+K.fsizes[e]+'" class="'+K.css+'_fontsize" style="font-size:'+K.fsizes[e]+K.funit+'" role="menuitem" unselectable>Abcdefgh...</a>')}else if("color"==P[t].name&&Array.isArray(W)){o.querySelector("."+K.css+"_tool_"+P[t].cls).insertAdjacentHTML("beforeend",'<div class="'+K.css+'_cpalette" unselectable></div>');for(let e=0;e<W.length;e++)null!=W[e]?o.querySelector("."+K.css+"_cpalette").insertAdjacentHTML("beforeend","<a "+K.css+'-styleval="'+W[e]+'" class="'+K.css+'_color" style="background-color: rgb('+W[e]+')" role="gridcell" unselectable></a>'):o.querySelector("."+K.css+"_cpalette").insertAdjacentHTML("beforeend",'<div class="'+K.css+'_colorSeperator"></div>')}}f.dataset.linktype="0";for(let e=0;e<3;e++)f.insertAdjacentHTML("beforeend","<a "+K.css+'-linktype="'+e+'" unselectable>'+K.linktypes[e]+"</a>"),m.innerHTML='<div class="'+K.css+'_linktypearrow" unselectable></div><div class="'+K.css+'_linktypetext">'+f.querySelectorAll("a")[f.dataset.linktype].textContent+"</div>";let e="";if(e=/msie/.test(J)?"-ms-":/chrome/.test(J)||/safari/.test(J)||/yandex/.test(J)?"-webkit-":/mozilla/.test(J)?"-moz-":/opera/.test(J)?"-o-":/konqueror/.test(J)?"-khtml-":"",K.placeholder&&""!=K.placeholder){n.prepend('<div class="'+K.css+'_placeholder" unselectable><div class="'+K.css+'_placeholder_text">'+K.placeholder+"</div></div>");let e=n.querySelector("."+K.css+"_placeholder");e.addListener("click",function(){i.focus()})}n.querySelectorAll("[unselectable]").forEach(function(t){t.style[e+"user-select"]="none",t.classList.add("unselectable"),t.setAttribute("unselectable","on"),["selectstart","mousedown"].forEach(function(e){t.removeListener(e)})});let y=o.querySelectorAll("."+K.css+"_tool"),g=o.querySelector("."+K.css+"_formats"),v=o.querySelector("."+K.css+"_fontsizes"),b=o.querySelector("."+K.css+"_cpalette"),_=function(){let t,s;if(window.getSelection&&(s=getSelection(),t=s.anchorNode),!t&&document.selection&&document.selection.createRange&&"None"!=document.selection.type){s=document.selection;let e=s.getRangeAt?s.getRangeAt(0):s.createRange();t=e.commonAncestorContainer||(e.parentElement?e.parentElement():e.item(0))}return!!t&&("#text"==t.nodeName?t.parentNode:t)};y.forEach(function(e){e.removeAllListeners("click"),e.addListener("click",function(e){"displaysource"!=this.dataset.command||void 0!==o.dataset.sourceOpened&&"false"!=o.dataset.sourceOpened?(void 0===o.dataset.sourceOpened||"false"==o.dataset.sourceOpened?"linkcreator"==this.dataset.command?void 0===o.dataset.linkOpened||"false"==o.dataset.linkOpened?x():(M(!1),O(!1)):"formats"==this.dataset.command?("formats"!=this.dataset.command||e.target.classList.contains(K.css+"_format")||(O(!0),g.querySelectorAll("a").forEach(function(e){e.addListener("click",function(){this.querySelectorAll("*").forEach(function(e){e.addListener("click",function(e){return e.preventDefault(),!1})}),N(this.textContent),q("formatBlock","<"+this.getAttribute(K.css+"-formatval")+">"),O(!1)})})),z("",!1),i.matches(":not(:focus)")&&i.focus()):"fSize"==this.dataset.command||"colors"==this.dataset.command?(("fSize"==this.dataset.command&&!e.target.classList.contains(K.css+"_fontsize")||"colors"==this.dataset.command&&!e.target.classList.contains(K.css+"_color"))&&j(this.dataset.command),O(!1),i.matches(":not(:focus)")&&i.focus()):(i.matches(":not(:focus)")&&i.focus(),q(this.dataset.command,null),z("",!1),O(!1),C(),void 0===this.dataset.emphasis||"true"!=this.dataset.emphasis.toLowerCase()||this.classList.contains(a)?this.classList.remove(a):this.classList.add(a),p.classList.add(K.css+"_hiddenField"),i.classList.remove(K.css+"_hiddenField")):(o.dataset.sourceOpened=!1,o.querySelectorAll("."+K.css+"_tool").forEach(function(e){e.classList.remove(K.css+"_hiddenField")}),p.classList.add(K.css+"_hiddenField"),i.classList.remove(K.css+"_hiddenField")),K.placeholder&&""!=K.placeholder&&(""!=i.innerHTML?placeHolder.style.display="none":placeHolder.style.display="")):(o.querySelector("."+K.css+"_tool").classList.add(K.css+"_hiddenField"),this.classList.remove(K.css+"_hiddenField"),o.dataset.sourceOpened=!0,t.style.height=i.outerHeight,p.classList.remove(K.css+"_hiddenField"),i.classList.add(K.css+"_hiddenField"),t.focus(),M(!1),z("",!1),O(),K.placeholder&&""!=K.placeholder&&(placeHolder.style.display="none")),i.dispatchEvent(new Event("change"))}),e.addListener("mouseover",function(e){if(K.title&&""!=this.dataset.title&&(e.target.classList.contains(K.css+"_tool")||e.target.classList.contains(K.css+"_tool_icon"))){document.querySelectorAll("."+K.css+"_title").forEach(function(e){e.remove()}),n.insertAdjacentHTML("beforeend",'<div class="'+K.css+'_title"><div class="'+K.css+'_titleArrow"><div class="'+K.css+'_titleArrowIcon"></div></div><div class="'+K.css+'_titleText">'+this.dataset.title+"</div></div>");let e=document.querySelector("."+K.css+"_title"),t=this.offsetTop,s=this.offsetLeft,l=s+this.outerWidth-e.outerWidth/2-this.outerWidth/2,o=t+this.outerHeight+5;setTimeout(function(){e.style.top=o,e.style.left=l,e.fadeIn(200)},400)}}),e.addListener("mouseleave",function(e){document.querySelectorAll("."+K.css+"_title").forEach(function(e){e.remove()})})});let L=null;return["keypress","keyup","keydown","drop","cut","copy","paste","DOMCharacterDataModified","DOMSubtreeModified"].forEach(function(e){i.addListener(e,function(){void 0!==o.dataset.sourceOpened&&"false"!=o.dataset.sourceOpened.toLowerCase()||this.dispatchEvent(new Event("change")),C(),"function"==typeof K.change&&"number"!=typeof K.change.nodeType&&K.change(),K.placeholder&&""!=K.placeholder&&(""!=this.textContent?placeHolder.style.display="none":placeHolder.style.display="")})}),i.addListener("change",function(){void 0!==o.dataset.sourceOpened&&"false"!=o.dataset.sourceOpened.toLowerCase()||(clearTimeout(L),L=setTimeout($,10))}),i.addListener("keydown",function(t){if(t.ctrlKey)for(let e=0;e<P.length;e++)if(K[P[e].name]&&t.keyCode==P[e].key.charCodeAt(0))return""!=P[e].command&&"linkcreator"!=P[e].command?q(P[e].command,null):"linkcreator"==P[e].command&&x(),!1}),["mouseup","keyup"].forEach(function(e){i.addListener(e,D)}),i.addListener("focus",function(){if("function"==typeof K.focus&&"number"!=typeof K.focus.nodeType&&K.focus(),n.classList.add(K.css+"_focused"),/opera/.test(J)){let e=document.createRange();e.selectNodeContents(i),e.collapse(!1);let t=window.getSelection();t.removeAllRanges(),t.addRange(e)}}),i.addListener("focusout",function(){y.forEach(function(e){e.classList.remove(a)}),z("",!1),O(!1),C(),"function"==typeof K.blur&&"number"!=typeof K.blur.nodeType&&K.blur(),n.classList.remove(K.css+"_focused"),Array.isArray(K.formats)&&N(K.formats[0][1])}),["keydown","keyup"].forEach(function(e){t.addListener(e,function(){setTimeout(U,0),this.style.height=this.scrollHeight,""==this.value&&(this.style.height=0)})}),t.addListener("focus",function(){n.classList.add(K.css+"_focused")}),t.addListener("focusout",function(){n.classList.remove(K.css+"_focused")}),this.container=n,this;function S(){return window.getSelection?window.getSelection():document.selection&&document.selection.createRange&&"None"!=document.selection.type?document.selection.createRange():void 0}function q(e,t){let s,l=S();window.getSelection?(l.anchorNode&&l.getRangeAt&&(s=l.getRangeAt(0)),s&&(l.removeAllRanges(),l.addRange(s)),J.match(/msie/)||document.execCommand("StyleWithCSS",!1,!1),document.execCommand(e,!1,t)):document.selection&&document.selection.createRange&&"None"!=document.selection.type&&(s=document.selection.createRange(),s.execCommand(e,!1,t)),H(!1,!1)}function T(o,n,a){if(i.matches(":not(:focus)")&&i.focus(),window.getSelection){let e=S(),t,s,l;e.anchorNode&&e.getRangeAt&&(t=e.getRangeAt(0),s=document.createElement(o),s.setAttribute(n,a),l=t.extractContents(),s.appendChild(l),t.insertNode(s),e.removeAllRanges(),H(s,"style"==n&&a))}else document.selection&&document.selection.createRange&&"None"!=document.selection.type&&(o="<"+o+" "+n+'="'+a+'">'+document.selection.createRange().htmlText+"</"+o+">",document.selection.createRange().pasteHTML(o))}function H(e,s){let t=_();if(t=t||e,t&&0==s)t.parentNode.matches("[style]")&&t.setAttribute("style",t.parentNode.getAttribute("style")),t.matches("[style]")&&t.querySelectorAll("*").forEach(function(e){e.setAttribute("style",t.getAttribute("style"))});else if(e&&s&&e.matches("[style]")){let t=s.split(";");t=t[0].split(":"),e.matches('[style*="'+t[0]+'"]')&&e.querySelectorAll("*").forEach(function(e){e.style[t[0]]=t[1]}),w(e)}}function w(s){if(s)if(document.body.createTextRange){let e=document.body.createTextRange();e.moveToElementText(s),e.select()}else if(window.getSelection){let e=window.getSelection(),t=document.createRange();"undefined"!=s&&null!=s&&(t.selectNodeContents(s),e.removeAllRanges(),e.addRange(t),s.matches(":empty")&&(s.insertAdjacentHTML("beforeend","&nbsp;"),w(s)))}}function x(){if(void 0===o.dataset.sourceOpened||"false"==o.dataset.sourceOpened){let e=_(),t="http://";M(!0),e?"a"==e.tagName.toLowerCase()&&e.matches("[href]")?(t=e.getAttribute("href"),e.setAttribute(h,"")):T("a",h,""):d.value=t,d.focus(),r.addListener("click",function(e){(e.target.classList.contains(K.css+"_linktypetext")||e.target.classList.contains(K.css+"_linktypearrow"))&&C(!0)}),f.querySelectorAll("a").forEach(function(e){e.addListener("click",function(){var e=this.getAttribute(K.css+"-linktype");f.dataset.linktype=e,m.querySelector("."+K.css+"_linktypetext").innerHTML=f.querySelectorAll("a")[f.dataset.linktype].textContent,R(t),C()})}),R(t),d.focus(),d.value=t,["keypress","keyup"].forEach(function(e){d.addListener(e,function(e){if(13==e.keyCode)return E(n.querySelector("["+h+"]")),!1})}),u.addListener("click",function(){return E(n.querySelector("["+h+"]")),!1})}else M(!1)}function E(e){d.focus(),w(e),void 0!==e&&e&&e.removeAttribute(h),"2"!=f.dataset.linktype?q("createlink",d.value):(q("insertImage",d.value),i.querySelectorAll("img").forEach(function(e){let t=e.prev("a"),s=e.next("a");t&&""==t.innerHTML?t.remove():s&&""==s.innerHTML&&s.remove()})),M(),i.dispatchEvent(new Event("change"))}function M(e){var t;t="["+h+"]:not([href])",n.querySelectorAll(t).forEach(function(e){e.insertAdjacentHTML("beforebegin",e.innerHTML),e.remove()}),n.querySelectorAll("["+h+"][href]").forEach(function(e){e.removeAttribute(h)}),e?(o.dataset.linkOpened=!0,l.style.display=""):(o.dataset.linkOpened=!1,l.style.display="none"),C()}function C(e){f.style.display=e?"":"none"}function R(e){var t=f.dataset.linktype;"1"!=t||"http://"!=d.value&&!d.matches('[value^="http://"]')&&d.matches('[value^="mailto"]')?"1"==t||d.matches('[value^="http://"]')?d.value=e:d.value="http://":d.value="mailto:"}function j(s){void 0===o.dataset.sourceOpened||"false"==o.dataset.sourceOpened?("fSize"==s?styleField=v:"colors"==s&&(styleField=b),z(styleField,!0),styleField.querySelectorAll("a").forEach(function(e){e.removeAllListeners("click"),e.addListener("click",function(){let e=this.getAttribute(K.css+"-styleval");"fSize"==s?(styleType="font-size",e+=K.funit):"colors"==s&&(styleType="color",e="rgb("+e+")");var t=function(e){let t=_();{if(t&&t.matches("[style]")&&""!=t.style[e]){var s=t.style[e];t.style[e]="";var l=t.getAttribute("style");return t.style[e]=s,l}return""}}(styleType);T("span","style",styleType+":"+e+";"+t),z("",!1),document.querySelectorAll("."+K.css+"_title").forEach(function(e){e.remove()}),i.dispatchEvent(new Event("change"))})})):z(styleField,!1),M(!1)}function z(t,e){let s="",l=[{d:"fsizeOpened",f:v},{d:"cpallOpened",f:b}];if(""!=t)for(let e=0;e<l.length;e++)t==l[e].f&&(s=l[e]);if(e){o.dataset[s.d]=!0,s.f.slideDown(100);for(let e=0;e<l.length;e++)s.d!=l[e].d&&(o.dataset[l[e].d]=!1,l[e].f.slideUp(100))}else for(let e=0;e<l.length;e++)o.dataset[l[e].d]=!1,l[e].f.slideUp(100)}function O(e){!(!e||void 0===g.dataset.status||"true"!=g.dataset.status.toLowerCase())||!e?(g.dataset.status=!1,g.slideUp(200)):(g.dataset.status=!0,g.slideDown(200))}function N(e){let t=g.closest("."+K.css+"_tool").querySelector("."+K.css+"_tool_label").querySelector("."+K.css+"_tool_text");10<e.length&&(e=e.substr(0,7)+"..."),t.innerHTML=e}function F(e){let t,s,l;for(t=e.replace(/\n/gim,"").replace(/\r/gim,"").replace(/\t/gim,"").replace(/&nbsp;/gim," "),s=[/\<span(|\s+.*?)><span(|\s+.*?)>(.*?)<\/span><\/span>/gim,/<(\w*[^p])\s*[^\/>]*>\s*<\/\1>/gim,/\<div(|\s+.*?)>(.*?)\<\/div>/gim,/\<strong(|\s+.*?)>(.*?)\<\/strong>/gim,/\<em(|\s+.*?)>(.*?)\<\/em>/gim],l=["<span$2>$3</span>","","<p$1>$2</p>","<b$1>$2</b>","<i$1>$2</i>"],c=0;c<5;c++)for(let e=0;e<s.length;e++)t=t.replace(s[e],l[e]);if(K.p||(t=t.replace(/\<p(|\s+.*?)>(.*?)\<\/p>/gi,"<br/>$2")),!K.br){s=[/\<br>(.*?)/gi,/\<br\/>(.*?)/gi],l=["<p>$1</p>","<p>$1</p>"];for(let e=0;e<s.length;e++)t=t.replace($htmlPattern[e],l[e])}return K.p||K.br||(t=t.replace(/\<p>(.*?)\<\/p>/gi,"<div>$1</div>")),t}function $(){var e=""==i.textContent&&i.innerHTML.length<12?"":i.innerHTML;t.value=F(e)}function U(){i.innerHTML=F(t.value)}function I(e){let s=!1,l=_(),o;return l&&(e.forEach(function(e,t){o=l.tagName.toLowerCase(),o==t?s=!0:l.parents().forEach(function(e){o=e.tagName.toLowerCase(),o==t&&(s=!0)})}),s)}function D(e){for(let e=0;e<P.length;e++)K[P[e].name]&&P[e].emphasis&&""!=P[e].tag&&(I(P[e].tag)?o.querySelectorAll("."+K.css+"_tool_"+P[e].cls).forEach(function(e){e.classList.add(a)}):document.querySelector("."+K.css+"_tool_"+P[e].cls).classList.remove(a));if(K.format&&Array.isArray(K.formats)){let s=!1;for(let t=0;t<K.formats.length;t++){let e=[];if(e[0]=K.formats[t][0],0<K.formats[t][0].length&&I(e)){N(K.formats[t][1]),s=!0;break}}s||N(K.formats[0][1])}z("",!1),O(!1)}}else if(0<B.closest("."+K.css).length){let e=B.closest("."+K.css).querySelector("."+K.css+"_editor").innerHTML,t="";Array.prototype.forEach.call(B.attributes,function(){"style"!=this.nodeName&&(t=t+" "+this.nodeName+'="'+this.nodeValue+'"')});k=B.matches("[data-origin]")&&""!=B.getAttribute("data-origin")?B.getAttribute("data-origin"):"textarea";let s=">"+e;"input"!=k&&"option"!=k||(e=e.replace(/"/g,"&#34;").replace(/'/g,"&#39;").replace(/</g,"&lt;").replace(/>/g,"&gt;"),s='value="'+e+'">');let l=B.cloneNode();B.dataset.jste=!1,B.closest("."+K.css).insertAdjacentHTML("beforeend",l).remove(),l.outerHTML="<"+k+t+s+"</"+k+">"}}}};
//# sourceMappingURL=jste.min.js.map